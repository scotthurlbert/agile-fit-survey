"use strict";angular.module("agilefit",["ngCookies","ngResource","ngSanitize","firebase"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("agilefit").controller("MainCtrl",["$scope","$firebase","$location",function(a,b,c){a.getGroup=function(){return console.log(c.path()),console.log(c),c.search()},a.init=function(){a.surveyFinished=!1,a.q=0,a.maxQ=0,a.currentQuestion={},a.name="";var b=new Date;a.startTime=b.toISOString(),a.g1=0,a.g2=0,a.g3=0,a.g4=0,a.g5=0,a.g6=0,a.g7=0,a.g8=0,a.g9=0,a.g2activities="",a.g3activities="",a.g5activities="",a.g6activities="",a.g7activities="",a.g8activities="",a.g9activities="",a.g4teamroom="",a.g5projectschedule=!1,a.g5userstory=!1,a.g5tests=!1,a.g5defects=!1,a.g5userstoriesreleased=!1,a.g5projectplan=!1,a.g5budget=!1,a.g5other="",a.g5done=!1,a.g9examples="",a.g2reasons="",a.g3reasons="",a.g4reasons="",a.g5reasons="",a.g6reasons="",a.g7reasons="",a.g8reasons="",a.g9reasons="",a.results=[{},{},{},{},{},{},{},{},{}]},a.getAnswerText=function(a,b){var c="";try{a&&a.answers&&_.chain(a.answers).where({value:b}).each(function(a){a&&a.text&&(console.log("The answer given is: "+a.text),c=a.text)})}catch(d){console.log("Error trying to get answer text: "+d.message)}return c},a.questions=[{name:"q1",order:1,question:"Our highest priority is to:",answers:[{text:"deliver valuable software on schedule",order:1,value:"-2"},{text:"deliver valuable software on budget",order:2,value:"-1"},{text:"deliver valuable software using continuous delivery",order:3,value:"2"},{text:"deliver valuable software with a minimum of bugs",order:4,value:"1"}],beforeQuestion:function(){console.log("beforeQuestion question 1")},afterAnswer:function(){console.log("afterAnswer question 1")},afterQuestion:function(b){console.log("afterQuestion question 1");var c={question:b,value:a.g1,"answer-text":a.getAnswerText(b,a.g1),activities:"","strongly-disagree":""};a.results[b.order-1]=c}},{name:"q2",order:2,question:"Our team welcomes changing requirements, even late in development:",answers:[{text:"strongly agree",order:1,value:"2"},{text:"agree",order:2,value:"1"},{text:"disagree",order:3,value:"-1"},{text:"strongly disagree",order:4,value:"-2"}],beforeQuestion:function(){console.log("beforeQuestion question 2")},afterAnswer:function(){console.log("afterAnswer question 2")},afterQuestion:function(b){console.log("afterQuestion question 2");var c={question:b,value:a.g2,"answer-text":a.getAnswerText(b,a.g2),activities:a.g2activities,"strongly-disagree":a.g2reasons};a.results[b.order-1]=c}},{name:"q3",order:3,question:"Business people and developers must work together daily on the project:",answers:[{text:"strongly agree",order:1,value:"2"},{text:"agree",order:2,value:"1"},{text:"disagree",order:3,value:"-1"},{text:"strongly disagree",order:4,value:"-2"}],beforeQuestion:function(){console.log("beforeQuestion question 3")},afterAnswer:function(){console.log("afterAnswer question 3")},afterQuestion:function(b){console.log("afterQuestion question 3");var c={question:b,value:a.g3,"answer-text":a.getAnswerText(b,a.g3),activities:a.g3activities,"strongly-disagree":a.g3reasons};a.results[b.order-1]=c}},{name:"q4",order:4,question:"Our team believes the most efficient and effective method of communication is face-to-face conversation:",answers:[{text:"strongly agree",order:1,value:"2"},{text:"agree",order:2,value:"1"},{text:"disagree",order:3,value:"-1"},{text:"strongly disagree",order:4,value:"-2"}],beforeQuestion:function(){console.log("beforeQuestion question 4")},afterAnswer:function(){console.log("afterAnswer question 4")},afterQuestion:function(b){console.log("afterQuestion question 4");var c={question:b,value:a.g4,"answer-text":a.getAnswerText(b,a.g4),activities:"","team-room":a.g4teamroom,"strongly-disagree":a.g4reasons};a.results[b.order-1]=c}},{name:"q5",order:5,question:"Working software is the primary measure of progress:",answers:[{text:"strongly agree",order:1,value:"2"},{text:"agree",order:2,value:"1"},{text:"disagree",order:3,value:"-1"},{text:"strongly disagree",order:4,value:"-2"}],beforeQuestion:function(){console.log("beforeQuestion question 5")},afterAnswer:function(){console.log("afterAnswer question 5")},afterQuestion:function(b){console.log("afterQuestion question 5");var c={question:b,value:a.g5,"answer-text":a.getAnswerText(b,a.g5),activities:a.g5activities,"measure-project-schedule":a.g5projectschedule,"measure-user-story":a.g5userstory,"measure-tests":a.g5tests,"measure-defects":a.g5defects,"measure-user-stories-released":a.g5userstoriesreleased,"measure-project-plan":a.g5projectplan,"measure-budget":a.g5budget,"measure-other":a.g5other,"strongly-disagree":a.g5reasons};a.results[b.order-1]=c}},{name:"q6",order:6,question:"Sponsors, developers, and users should be able to maintain a constant pace indefinitely (no nights and weekends):",answers:[{text:"strongly agree",order:1,value:"2"},{text:"agree",order:2,value:"1"},{text:"disagree",order:3,value:"-1"},{text:"strongly disagree",order:4,value:"-2"}],beforeQuestion:function(){console.log("beforeQuestion question 6")},afterAnswer:function(){console.log("afterAnswer question 6")},afterQuestion:function(b){console.log("afterQuestion question 6");var c={question:b,value:a.g6,"answer-text":a.getAnswerText(b,a.g6),activities:a.g6activities,"strongly-disagree":a.g6reasons};a.results[b.order-1]=c}},{name:"q7",order:7,question:"Simplicity [of work] is essential. If it can be done in a simpler way, it should:",answers:[{text:"strongly agree",order:1,value:"2"},{text:"agree",order:2,value:"1"},{text:"disagree",order:3,value:"-1"},{text:"strongly disagree",order:4,value:"-2"}],beforeQuestion:function(){console.log("beforeQuestion question 7")},afterAnswer:function(){console.log("afterAnswer question 7")},afterQuestion:function(b){console.log("afterQuestion question 7");var c={question:b,value:a.g7,"answer-text":a.getAnswerText(b,a.g7),activities:a.g7activities,"strongly-disagree":a.g7reasons};a.results[b.order-1]=c}},{name:"q8",order:8,question:"Self-organizing teams are best for architectures, requirements, and designs:",answers:[{text:"strongly agree",order:1,value:"2"},{text:"agree",order:2,value:"1"},{text:"disagree",order:3,value:"-1"},{text:"strongly disagree",order:4,value:"-2"}],beforeQuestion:function(){console.log("beforeQuestion question 8")},afterAnswer:function(){console.log("afterAnswer question 8")},afterQuestion:function(b){console.log("afterQuestion question 8");var c={question:b,value:a.g8,"answer-text":a.getAnswerText(b,a.g8),activities:a.g8activities,"strongly-disagree":a.g8reasons};a.results[b.order-1]=c}},{name:"q9",order:9,question:"Regular retrospectives are important to tune and adjust our process:",answers:[{text:"strongly agree",order:1,value:"2"},{text:"agree",order:2,value:"1"},{text:"disagree",order:3,value:"-1"},{text:"strongly disagree",order:4,value:"-2"}],beforeQuestion:function(){console.log("beforeQuestion question 9")},afterAnswer:function(){console.log("afterAnswer question 9")},afterQuestion:function(b){console.log("afterQuestion question 9");var c={question:b,value:a.g9,"answer-text":a.getAnswerText(b,a.g9),activities:a.g9activities,examples:a.g9examples,"strongly-disagree":a.g9reasons};a.results[b.order-1]=c}}],a.createSurveyResults=function(){if(a.surveyFinished){var b=new Date,c=b.toISOString(),d={name:a.name,"start-date":a.startTime,"end-date":c,results:a.results};return d}return console.log("Survey is not finished.  Cannot create results."),{}},a.agileFitRef=new Firebase("https://hurlbert.firebaseio.com/AgileFit"),a.agileFit=b(a.agileFitRef),a.addSurveyResults=function(b){return a.agileFit.$add(b),"some url"},a.getScore=function(){return parseInt(a.g1)+parseInt(a.g2)+parseInt(a.g3)+parseInt(a.g4)+parseInt(a.g5)+parseInt(a.g6)+parseInt(a.g7)+parseInt(a.g8)+parseInt(a.g9)},a.hasText=function(a){return a&&a.length>5},a.g2DoesNotRequireManagerApproval=function(){return a.g2devpermission&&"yes"==a.g2devpermission},a.disablePrev=function(){return 1==a.q},a.beforeChangingQuestion=function(){a.currentQuestion&&a.currentQuestion.afterAnswer&&a.currentQuestion.afterQuestion&&(console.log(a.currentQuestion),a.currentQuestion.afterAnswer(a.currentQuestion),a.currentQuestion.afterQuestion(a.currentQuestion))},a.afterChangingQuestion=function(){_.chain(a.questions).where({order:a.q}).each(function(b){b&&b.question&&b.beforeQuestion&&(a.currentQuestion=b,console.log(b.question),b.beforeQuestion(b))})},a.next=function(){a.beforeChangingQuestion(),++a.q,a.maxQ=a.q>a.maxQ?a.q:a.maxQ,a.afterChangingQuestion()},a.prev=function(){a.q>1&&(a.beforeChangingQuestion(),--a.q,a.afterChangingQuestion())},a.disableNext=function(){if(1==a.q)return 0==a.g1;if(2==a.q){if(-2==a.g2)return!a.hasText(a.g2reasons);if(a.g2<2&&0!=a.g2)return!1;var b=!(2==a.g2&&a.hasText(a.g2activities)&&a.g2DoesNotRequireManagerApproval())||0==a.g2;return b}return 3==a.q?-2==a.g3?!a.hasText(a.g3reasons):a.g3<2&&0!=a.g3?!1:!(2==a.g3&&a.hasText(a.g3activities)&&"no"==a.g3devpermission)||0==a.g3:4==a.q?-2==a.g4?!a.hasText(a.g4reasons):a.g4<2&&0!=a.g4?!1:2==a.g4&&"yes"!=a.g4teamroom||0==a.g4:5==a.q?-2==a.g5?!a.hasText(a.g5reasons):a.g5<2&&0!=a.g5?!1:2==a.g5&&!a.g5done||0==a.g5:6==a.q?-2==a.g6?!a.hasText(a.g6reasons):a.g6<2&&0!=a.g6?!1:2==a.g6&&!a.hasText(a.g6activities)||0==a.g6:7==a.q?-2==a.g7?!a.hasText(a.g7reasons):a.g7<2&&0!=a.g7?!1:2==a.g7&&!a.hasText(a.g7activities)||0==a.g7:8==a.q?-2==a.g8?!a.hasText(a.g8reasons):a.g8<2&&0!=a.g8?!1:2==a.g8&&!a.hasText(a.g8activities)||0==a.g8:9==a.q?!0:!1},a.isSurveyFinished=function(){return 0==a.g1?!1:0==a.g2?!1:0==a.g3?!1:0==a.g4?!1:0==a.g5?!1:0==a.g6?!1:0==a.g7?!1:0==a.g8?!1:0==a.g9?!1:!0},a.disableShowResults=function(){return 9==a.q?a.isQ9Answered()?(a.surveyFinished=a.isSurveyFinished(),!a.surveyFinished):!0:!a.surveyFinished},a.isQ9Answered=function(){return 2==a.g9?"no"==a.g9devpermission&&a.hasText(a.g9activities)?!0:"yes"==a.g9devpermission&&a.hasText(a.g9activities)&&a.hasText(a.g9examples)?!0:!1:-2==a.g9?a.hasText(a.g9reasons):0!=a.g9},a.setAnswers=function(b){a.g1=b,a.g2=b,a.g3=b,a.g4=b,a.g5=b,a.g6=b,a.g7=b,a.g8=b,a.g9=b},a.startOver=function(){a.setAnswers(0),a.q=0,a.maxQ=0},a.goto6=function(){a.setAnswers(1),a.g6=0,a.q=6,a.maxQ=6},a.goto7=function(){a.setAnswers(1),a.g7=0,a.q=7,a.maxQ=7},a.gotoShowResults=function(){a.setAnswers(1),a.g1=2,a.g2=-1,a.g7=-2,a.g7reasons="Some reason for this answer",a.g8=-1,a.g9=-2,a.g9reasons="Some reason for this answer",a.q=10,a.maxQ=10,a.surveyFinished=!0},a.saveResults=function(){var b=a.createSurveyResults();console.log("saving result to database"),a.addSurveyResults(b)},a.init()}]);